<Dragbar/>
<main>
	<div id="menu">
    <button class="{flavor === 'sqlite' ? 'active' : ''}"on:click="set({ flavor: 'sqlite' })">SQLite</button><button class="{flavor === 'pg' ? 'active' : ''}" on:click="set({ flavor: 'pg' })">PostgreSQL</button>
  </div>

  <div id="list">
  	<svelte:component this={Flavor}></svelte:component>
  </div>
</main>

<style type="text/stylus">
	:global(body) 
		background-color white
		color #333
	:global(button)
		font-weight normal
		color #333
		user-select none

	:global(main) 
		box-sizing border-box

	main
		padding 2em
		height 100%
	
	#menu 
		margin-bottom 14px
		
	button
		display inline-block
		vertical-align top
		border 2px solid #000
		width 50%
		text-align center
		cursor pointer
		&:first-child
			border-radius 5px 0 0 5px
			border-right-width 1px
		&:last-child
			border-radius: 0 5px 5px 0;
			border-left-width: 1px;
			
	.active
		background-color #000
		color #fff
		cursor default
</style>

<script>
	import * as path from 'path';
	import { remote, ipcRenderer } from 'electron';
	import readJSON from '../shared/readJSON';

	import Dragbar from '../components/Dragbar.html';
	import Sqlite from '../components/sqlite-uploader.html';
	import Pg from '../components/pg-connect.html';

	// const userData = remote.app.getPath('userData');
	// const recent = readJSON(path.join(userData, 'recent.json')) || [];

	export default {
		components: {
			Dragbar
		},
		computed: {
			Flavor: ({flavor}) => {
				if (flavor === 'sqlite') return Sqlite;
				if (flavor === 'pg') return Pg;
			}
		},
		data() {
			return {
				flavor: 'sqlite'
			};
		}
	};
</script>
